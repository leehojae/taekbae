<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="spms.dao.MemberDao">
  <resultMap type="member" id="memberResultMap">
    <id     property="no"       column="MNO"/>
    <result property="name"     column="MNAME"/>
    <result property="id"    column="ID"/>
    <result property="tel"      column="TEL"/>
    <result property="password" column="PWD"/>
    <result property="personalNumber" column="PERSONAL_NO"/>
    <result property="rank" column="RANK"/>
    <result property="photo"    column="PHOTO"/>
    <result property="officeNum"    column="OFFICE_NUM"/>
    <result property="officeName"    column="OFFICE_NAME"/>
  </resultMap>
	
	<select id="selectList" resultMap="memberResultMap">
		select m.MNO,m.MNAME,m.ID,m.TEL,m.PERSONAL_NO,m.RANK , m.OFFICE_NUM 
		from MEMBERS m
	</select>
	
	<select id="selectOne" parameterType="int" resultMap="memberResultMap">
    select MNO,MNAME,ID, PWD,TEL,PERSONAL_NO,RANK,PHOTO, OFFICE_NUM
    from MEMBERS
    where MNO=#{value}
  </select>
  
  <delete id="delete" parameterType="int">
    delete from MEMBERS where MNO=#{no}
  </delete>
  
  <insert id="insert" parameterType="member">
    INSERT INTO MEMBERS(MNAME,ID,TEL,PERSONAL_NO,PHOTO, PWD ) 
    VALUES(#{name},#{id},#{tel},#{personalNumber}   ,#{photo}       ,   #{password} )
  </insert>
  
  <update id="update" parameterType="member">
    update MEMBERS set 
      MNAME=#{name},
      ID=#{id},
      TEL=#{tel},
      PERSONAL_NO=#{personalNumber},
      PHOTO=#{photo} 
    where MNO=#{no}
  </update>
  
  <select id="selectByIdPassword" 
      parameterType="map" 
      resultMap="memberResultMap">
    select MNO,MNAME,ID,PHOTO
    from MEMBERS
    where ID=#{id} and PWD=#{password}
  </select>
  
  <select id="selectListByProject" parameterType="int" 
      resultMap="memberResultMap">
    select T1.MNO, T2.MNAME, T2.PHOTO
		from PRJ_MEMS T1 left outer join MEMBERS T2
		  using (MNO)
		where T1.PNO=#{value}
		order by T2.MNAME;
  </select>
</mapper>















